-- GitHub Loadstring Script

local player = game.Players.LocalPlayer
local replicatedStorage = game:GetService("ReplicatedStorage")

-- Create the GUI
local function createGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player:WaitForChild("PlayerGui")
    screenGui.Name = "ToolGui"

    -- Create the ScrollingFrame
    local scrollingFrame = Instance.new("ScrollingFrame")
    scrollingFrame.Size = UDim2.new(0, 300, 0, 200)
    scrollingFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
    scrollingFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    scrollingFrame.Parent = screenGui
    scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, 0) -- Update later when tools are added
    scrollingFrame.ScrollBarThickness = 8 -- Add a scrollbar

    -- Create the Update Button
    local updateButton = Instance.new("TextButton")
    updateButton.Size = UDim2.new(0, 100, 0, 50)
    updateButton.Position = UDim2.new(0.5, -50, 1, -60)
    updateButton.AnchorPoint = Vector2.new(0.5, 0)
    updateButton.Text = "Update"
    updateButton.TextColor3 = Color3.new(1, 1, 1)
    updateButton.BackgroundColor3 = Color3.new(0, 1, 0)
    updateButton.Parent = screenGui

    -- Function to populate the ScrollingFrame with tool buttons
    local function updateTools()
        -- Clear existing buttons if any
        for _, child in pairs(scrollingFrame:GetChildren()) do
            if child:IsA("TextButton") then
                child:Destroy()
            end
        end
        
        -- Fetch the tools from a folder in ReplicatedStorage called "Tools"
        local toolsFolder = replicatedStorage:FindFirstChild("Tools")
        if not toolsFolder then
            warn("No 'Tools' folder found in ReplicatedStorage")
            return
        end

        -- Create buttons for each tool
        local yOffset = 0
        for _, tool in pairs(toolsFolder:GetChildren()) do
            if tool:IsA("Tool") then
                local toolButton = Instance.new("TextButton")
                toolButton.Size = UDim2.new(1, 0, 0, 50)
                toolButton.Position = UDim2.new(0, 0, 0, yOffset)
                toolButton.Text = tool.Name
                toolButton.Parent = scrollingFrame

                -- Click to give the player the tool
                toolButton.MouseButton1Click:Connect(function()
                    local clonedTool = tool:Clone()
                    clonedTool.Parent = player.Backpack
                end)

                yOffset = yOffset + 50
            end
        end

        -- Update the canvas size for the scrolling frame
        scrollingFrame.CanvasSize = UDim2.new(0, 0, 0, yOffset)
    end

    -- Connect Update button to populate the tools
    updateButton.MouseButton1Click:Connect(function()
        updateTools() -- Load or refresh tools whenever the button is clicked
    end)
end

-- Initialize the GUI on script run
createGui()
